import { useState, useRef, useEffect } from "react"; import { motion, AnimatePresence } from "framer-motion"; import { Heart, Sparkles, Gift, Music, Star } from "lucide-react";

export default function ProposalExperience() { const [started, setStarted] = useState(false); const [showMemories, setShowMemories] = useState(false); const [showQuestion, setShowQuestion] = useState(false); const [showRing, setShowRing] = useState(false); const [accepted, setAccepted] = useState(false); const audioRef = useRef(null);

useEffect(() => { if (started && audioRef.current) { audioRef.current.play().catch(() => {}); } }, [started]);

return ( <div className="min-h-screen w-full bg-gradient-to-br from-pink-100 via-purple-100 to-rose-200 overflow-hidden relative"> <FloatingHearts />

<audio
    ref={audioRef}
    loop
    src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_5e4dfdbb7a.mp3"
  />

  {!started && <IntroScreen onStart={() => setStarted(true)} />}

  {started && !showMemories && (
    <LoveStory onNext={() => setShowMemories(true)} />
  )}

  {showMemories && !showQuestion && (
    <MemoryGallery onNext={() => setShowQuestion(true)} />
  )}

  {showQuestion && !showRing && (
    <BigQuestion
      onYes={() => {
        setShowRing(true);
        setAccepted(true);
      }}
      onNo={() => alert("Think again ğŸ˜Œ")}
    />
  )}

  <AnimatePresence>
    {showRing && (
      <RingReveal accepted={accepted} />
    )}
  </AnimatePresence>
</div>

); }

function IntroScreen({ onStart }) { return ( <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="flex flex-col items-center justify-center h-screen text-center px-6" > <motion.h1 initial={{ scale: 0.7 }} animate={{ scale: 1 }} transition={{ duration: 1 }} className="text-5xl font-bold text-rose-600 mb-6" > A Special Surprise ğŸŒ¸ </motion.h1>

<p className="text-lg text-gray-700 mb-10 max-w-md">
    This is not just a website... it's a journey of feelings, memories,
    and one important question.
  </p>

  <motion.button
    whileHover={{ scale: 1.1 }}
    whileTap={{ scale: 0.95 }}
    onClick={onStart}
    className="px-8 py-4 rounded-2xl bg-rose-500 text-white text-lg shadow-xl"
  >
    Start the Journey âœ¨
  </motion.button>
</motion.div>

); }

function LoveStory({ onNext }) { return ( <section className="h-screen flex flex-col items-center justify-center text-center px-6"> <motion.div initial={{ opacity: 0, y: 50 }} animate={{ opacity: 1, y: 0 }} className="space-y-6 max-w-xl" > <Heart className="mx-auto text-rose-500" size={48} /> <h2 className="text-4xl font-semibold text-rose-600">Our Story</h2> <p className="text-gray-700 text-lg"> Every moment we shared became a beautiful memory. Every smile, every laugh, every heartbeat... led to this moment. </p>

<motion.button
      whileHover={{ scale: 1.08 }}
      onClick={onNext}
      className="mt-6 px-6 py-3 rounded-xl bg-purple-500 text-white"
    >
      See Memories ğŸ’«
    </motion.button>
  </motion.div>
</section>

); }

function MemoryGallery({ onNext }) { const items = [ "First smile", "First laugh", "Unforgettable moment", "Endless happiness", ];

return ( <section className="h-screen flex flex-col items-center justify-center"> <h2 className="text-4xl font-semibold text-purple-600 mb-10"> Beautiful Memories âœ¨ </h2>

<div className="grid grid-cols-2 gap-6 px-6">
    {items.map((text, i) => (
      <motion.div
        key={i}
        initial={{ opacity: 0, scale: 0.8 }}
        animate={{ opacity: 1, scale: 1 }}
        transition={{ delay: i * 0.3 }}
        className="p-10 rounded-2xl bg-white shadow-xl text-center"
      >
        <Star className="mx-auto mb-2 text-pink-500" />
        {text}
      </motion.div>
    ))}
  </div>

  <motion.button
    whileHover={{ scale: 1.08 }}
    onClick={onNext}
    className="mt-10 px-6 py-3 rounded-xl bg-rose-500 text-white"
  >
    Continue ğŸ’–
  </motion.button>
</section>

); }

function BigQuestion({ onYes, onNo }) { return ( <section className="h-screen flex flex-col items-center justify-center text-center"> <motion.h2 initial={{ scale: 0.8 }} animate={{ scale: 1 }} className="text-5xl font-bold text-rose-600 mb-8" > Will You Say Yes? </motion.h2>

<div className="flex gap-8">
    <motion.button
      whileHover={{ scale: 1.2 }}
      onClick={onYes}
      className="px-8 py-4 rounded-2xl bg-green-500 text-white text-xl shadow-xl"
    >
      Yes ğŸ’
    </motion.button>

    <motion.button
      whileHover={{ x: [0, -10, 10, -10, 0] }}
      onClick={onNo}
      className="px-8 py-4 rounded-2xl bg-gray-400 text-white text-xl"
    >
      No ğŸ™ˆ
    </motion.button>
  </div>
</section>

); }

function RingReveal({ accepted }) { return ( <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className="fixed inset-0 flex items-center justify-center bg-black/70 backdrop-blur-lg" > <motion.div initial={{ scale: 0.3, rotate: -180 }} animate={{ scale: 1, rotate: 0 }} transition={{ type: "spring", stiffness: 120 }} className="bg-white rounded-3xl p-16 text-center shadow-2xl" > <Gift className="mx-auto text-yellow-500 mb-4" size={60} /> <h2 className="text-4xl font-bold text-rose-600 mb-4"> She Said YES ğŸ’– </h2> <p className="text-gray-600 text-lg">Forever begins now âœ¨</p> </motion.div> </motion.div> ); }

function FloatingHearts() { return ( <div className="absolute inset-0 pointer-events-none overflow-hidden"> {[...Array(20)].map((_, i) => ( <motion.div key={i} initial={{ y: "100%", opacity: 0 }} animate={{ y: "-10%", opacity: [0, 1, 0] }} transition={{ duration: 8 + Math.random() * 5, repeat: Infinity, delay: Math.random() * 5, }} className="absolute text-pink-400" style={{ left: ${Math.random() * 100}% }} > <Heart size={24} /> </motion.div> ))} </div> ); }

